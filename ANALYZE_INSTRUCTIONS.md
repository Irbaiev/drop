# üîç –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∞–Ω–∞–ª–∏–∑—É —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ stake.com

## –¶–µ–ª—å
–ù–∞–π—Ç–∏ API endpoint, –∫–æ—Ç–æ—Ä—ã–π stake.com –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ `sessionID` –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–≥—Ä—ã.

## –°–ø–æ—Å–æ–± 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–≥—Ä—ã –Ω–∞ stake.com
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞: https://stake.com/ru/casino/games/mirrorimage-drop-the-boss-trump

### –®–∞–≥ 2: –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
–ù–∞–∂–º–∏—Ç–µ `F12` –∏–ª–∏ `Ctrl+Shift+I` (Windows) / `Cmd+Option+I` (Mac)

### –®–∞–≥ 3: –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä
–í –∫–æ–Ω—Å–æ–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:

**–í–∞—Ä–∏–∞–Ω—Ç A:** –ï—Å–ª–∏ —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ –≤–∞—à —Å–µ—Ä–≤–µ—Ä:
```javascript
fetch('http://localhost:8080/network-analyzer.js')
  .then(r => r.text())
  .then(code => eval(code));
```

**–í–∞—Ä–∏–∞–Ω—Ç B:** –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `network-analyzer.js` –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª—å

### –®–∞–≥ 4: –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–≥—Ä—ã
–ù–∞–∂–º–∏—Ç–µ `F5` –∏–ª–∏ `Ctrl+R` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç –≤—Å–µ —Å–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã.

### –®–∞–≥ 5: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã
–í –∫–æ–Ω—Å–æ–ª–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ –ª–æ–≥–∏ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤. –û—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ –æ–±—Ä–∞—Ç–∏—Ç–µ –Ω–∞:
- üî¥ **IMPORTANT** - –∑–∞–ø—Ä–æ—Å—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å session/game/stake-engine
- –ó–∞–ø—Ä–æ—Å—ã —Å –º–µ—Ç–æ–¥–æ–º `POST` –∏–ª–∏ `GET` –∫ –¥–æ–º–µ–Ω–∞–º `stake-engine.com`, `stake.com`
- –ó–∞–ø—Ä–æ—Å—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ `sessionID` –≤ URL –∏–ª–∏ —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞

### –®–∞–≥ 6: –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
–í –∫–æ–Ω—Å–æ–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```javascript
// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã
const requests = getCapturedRequests();
console.table(requests);

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ JSON —Ñ–∞–π–ª
exportCapturedRequests();
```

## –°–ø–æ—Å–æ–± 2: –†—É—á–Ω–æ–π –∞–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ DevTools

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ DevTools
–ù–∞–∂–º–∏—Ç–µ `F12` ‚Üí –≤–∫–ª–∞–¥–∫–∞ **Network**

### –®–∞–≥ 2: –í–∫–ª—é—á–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤
- –ü–æ—Å—Ç–∞–≤—å—Ç–µ –≥–∞–ª–æ—á–∫—É "Preserve log"
- –û—á–∏—Å—Ç–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ (–∫–Ω–æ–ø–∫–∞ üö´)

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–≥—Ä—ã
–ù–∞–∂–º–∏—Ç–µ `F5`

### –®–∞–≥ 4: –§–∏–ª—å—Ç—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã
–í –ø–æ–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞ –≤–≤–µ–¥–∏—Ç–µ:
- `session` - –¥–ª—è –ø–æ–∏—Å–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å sessionID
- `stake-engine` - –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –∏–≥—Ä–æ–≤–æ–º—É —Å–µ—Ä–≤–µ—Ä—É
- `game` - –¥–ª—è –∏–≥—Ä–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### –®–∞–≥ 5: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –≤–∞–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∑–∞–ø—Ä–æ—Å –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ:
- **Headers** ‚Üí Request URL, Request Method, Request Headers
- **Payload** ‚Üí —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- **Response** ‚Üí –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞

### –®–∞–≥ 6: –ò—â–∏—Ç–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞:
1. **–ó–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** - –≤–æ–∑–º–æ–∂–Ω–æ, sessionID –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É
2. **–ó–∞–ø—Ä–æ—Å—ã –∫ `/session/start` –∏–ª–∏ –ø–æ—Ö–æ–∂–∏–º endpoint'–∞–º**
3. **WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è** - –≤–æ–∑–º–æ–∂–Ω–æ, sessionID –ø—Ä–∏—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ WS
4. **–ó–∞–ø—Ä–æ—Å—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏–≥—Ä—ã** - gameId, currency, language

## –ß—Ç–æ –∏—Å–∫–∞—Ç—å

### –í–æ–∑–º–æ–∂–Ω—ã–µ endpoint'—ã:
- `POST /api/session/start`
- `POST /api/game/session`
- `GET /api/session/new`
- `POST /frontendService/session`
- WebSocket: `wss://stake-engine.com/ws`

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:
```json
{
  "gameId": "mirrorimage-drop-the-boss-trump",
  "currency": "USD",
  "language": "ru",
  "demo": true
}
```

### –í–æ–∑–º–æ–∂–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:
```json
{
  "sessionID": "80344e37-3475-430a-8e39-ff6e10b05baf",
  "rgs_url": "rgs.stake-engine.com",
  "currency": "USD"
}
```

## –ü–æ—Å–ª–µ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è endpoint'–∞

–ï—Å–ª–∏ –≤—ã –Ω–∞—à–ª–∏ endpoint, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç sessionID:

1. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL –∑–∞–ø—Ä–æ—Å–∞**
2. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –º–µ—Ç–æ–¥ (GET/POST)**
3. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞** (–æ—Å–æ–±–µ–Ω–Ω–æ Authorization, –µ—Å–ª–∏ –µ—Å—Ç—å)
4. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞** (–µ—Å–ª–∏ POST)
5. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞**

–ó–∞—Ç–µ–º –º–æ–∂–Ω–æ:
- –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è sessionID
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ –≤ –≤–∞—à –∫–æ–¥ —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é `OFFLINE_SESSION_REFRESH_API_URL`
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é –≤ `index.html` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–æ–≤—ã—Ö —Å–µ—Å—Å–∏–π

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –≤ –∫–æ–Ω—Å–æ–ª–∏

```javascript
// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ iframe –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
document.querySelectorAll('iframe').forEach(iframe => {
  console.log('Iframe src:', iframe.src);
  const url = new URL(iframe.src);
  console.log('SessionID:', url.searchParams.get('sessionID'));
  console.log('RGS URL:', url.searchParams.get('rgs_url'));
});

// –ü–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å –≤—Å–µ fetch –∑–∞–ø—Ä–æ—Å—ã (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—É)
const originalFetch = window.fetch;
window.fetch = function(...args) {
  console.log('üîµ FETCH:', args[0], args[1]);
  return originalFetch.apply(this, args).then(response => {
    console.log('‚úÖ RESPONSE:', response.url, response.status);
    return response;
  });
};

// –ü–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å –≤—Å–µ XHR –∑–∞–ø—Ä–æ—Å—ã
const originalOpen = XMLHttpRequest.prototype.open;
XMLHttpRequest.prototype.open = function(method, url, ...args) {
  console.log('üîµ XHR:', method, url);
  return originalOpen.apply(this, [method, url, ...args]);
};
```

## –ü—Ä–∏–º–µ—Ä—ã –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö endpoint'–æ–≤

–ï—Å–ª–∏ –≤—ã –Ω–∞—à–ª–∏ endpoint, –ø–æ–¥–µ–ª–∏—Ç–µ—Å—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:
- URL endpoint'–∞
- –ú–µ—Ç–æ–¥ (GET/POST)
- –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
- –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞/–æ—Ç–≤–µ—Ç–∞

–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö sessionID!

