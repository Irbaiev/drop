<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stake.com Network Analyzer</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      padding: 20px;
      background: #1a1a1a;
      color: #fff;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    h1 {
      margin-bottom: 20px;
      color: #4CAF50;
    }
    .instructions {
      background: #2a2a2a;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      border-left: 4px solid #4CAF50;
    }
    .instructions h2 {
      margin-bottom: 10px;
      color: #4CAF50;
    }
    .instructions ol {
      margin-left: 20px;
      line-height: 1.8;
    }
    .instructions code {
      background: #1a1a1a;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
    }
    .controls {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    button {
      padding: 10px 20px;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.3s;
    }
    button:hover {
      background: #45a049;
    }
    button.secondary {
      background: #666;
    }
    button.secondary:hover {
      background: #777;
    }
    .stats {
      background: #2a2a2a;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }
    .stat-item {
      text-align: center;
    }
    .stat-value {
      font-size: 24px;
      font-weight: bold;
      color: #4CAF50;
    }
    .stat-label {
      font-size: 12px;
      color: #aaa;
      margin-top: 5px;
    }
    .requests {
      background: #2a2a2a;
      border-radius: 8px;
      padding: 20px;
    }
    .request-item {
      background: #1a1a1a;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 4px;
      border-left: 4px solid #4CAF50;
    }
    .request-item.important {
      border-left-color: #f44336;
      background: #2a1a1a;
    }
    .request-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .request-method {
      background: #4CAF50;
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: bold;
    }
    .request-method.POST {
      background: #2196F3;
    }
    .request-method.PUT {
      background: #FF9800;
    }
    .request-method.DELETE {
      background: #f44336;
    }
    .request-url {
      color: #4CAF50;
      word-break: break-all;
      font-family: 'Courier New', monospace;
      font-size: 14px;
    }
    .request-details {
      margin-top: 10px;
      font-size: 12px;
      color: #aaa;
    }
    .request-details summary {
      cursor: pointer;
      color: #4CAF50;
      margin-bottom: 5px;
    }
    .request-details pre {
      background: #0a0a0a;
      padding: 10px;
      border-radius: 4px;
      overflow-x: auto;
      margin-top: 5px;
    }
    .empty {
      text-align: center;
      padding: 40px;
      color: #666;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üîç Stake.com Network Request Analyzer</h1>
    
    <div class="instructions">
      <h2>üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:</h2>
      <ol>
        <li>–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)</li>
        <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞ <code>network-analyzer.js</code> –≤ –∫–æ–Ω—Å–æ–ª—å</li>
        <li>–ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–≥—Ä—ã –Ω–∞ stake.com: <a href="https://stake.com/ru/casino/games/mirrorimage-drop-the-boss-trump" target="_blank" style="color: #4CAF50;">https://stake.com/ru/casino/games/mirrorimage-drop-the-boss-trump</a></li>
        <li>–í –∫–æ–Ω—Å–æ–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: <code>copy(await fetch('network-analyzer.js').then(r => r.text()))</code> (–µ—Å–ª–∏ —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–µ–Ω)</li>
        <li>–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ <code>network-analyzer.js</code> –≤ –∫–æ–Ω—Å–æ–ª—å</li>
        <li>–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–≥—Ä—ã - –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω—ã –∏ –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω—ã</li>
        <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏:
          <ul>
            <li><code>getCapturedRequests()</code> - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã</li>
            <li><code>exportCapturedRequests()</code> - —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ JSON</li>
            <li><code>clearCapturedRequests()</code> - –æ—á–∏—Å—Ç–∏—Ç—å</li>
          </ul>
        </li>
      </ol>
    </div>
    
    <div class="controls">
      <button onclick="loadAnalyzer()">üì• –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä</button>
      <button onclick="refreshRequests()" class="secondary">üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫</button>
      <button onclick="exportRequests()" class="secondary">üíæ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å JSON</button>
      <button onclick="clearRequests()" class="secondary">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
    </div>
    
    <div class="stats" id="stats">
      <div class="stat-item">
        <div class="stat-value" id="total-requests">0</div>
        <div class="stat-label">–í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="important-requests">0</div>
        <div class="stat-label">–í–∞–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="session-requests">0</div>
        <div class="stat-label">–ó–∞–ø—Ä–æ—Å–æ–≤ —Å session</div>
      </div>
    </div>
    
    <div class="requests">
      <h2 style="margin-bottom: 15px;">üì° –ó–∞—Ö–≤–∞—á–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã:</h2>
      <div id="requests-list" class="empty">
        –ó–∞–ø—Ä–æ—Å—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–≥—Ä—ã.
      </div>
    </div>
  </div>
  
  <script>
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä
    async function loadAnalyzer() {
      try {
        const response = await fetch('network-analyzer.js');
        const code = await response.text();
        eval(code);
        alert('‚úÖ –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∂–µ–Ω! –¢–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–≥—Ä—ã –Ω–∞ stake.com');
      } catch (e) {
        alert('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥ –∏–∑ network-analyzer.js –≤—Ä—É—á–Ω—É—é –≤ –∫–æ–Ω—Å–æ–ª—å.');
        console.error(e);
      }
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –∑–∞–ø—Ä–æ—Å–æ–≤
    function refreshRequests() {
      if (typeof getCapturedRequests !== 'function') {
        document.getElementById('requests-list').innerHTML = 
          '<div class="empty">‚ö†Ô∏è –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä"</div>';
        return;
      }
      
      const requests = getCapturedRequests();
      updateStats(requests);
      renderRequests(requests);
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    function updateStats(requests) {
      const total = requests.length;
      const important = requests.filter(r => 
        r.url && (r.url.includes('session') || r.url.includes('game') || r.url.includes('stake-engine'))
      ).length;
      const session = requests.filter(r => 
        r.url && r.url.includes('session')
      ).length;
      
      document.getElementById('total-requests').textContent = total;
      document.getElementById('important-requests').textContent = important;
      document.getElementById('session-requests').textContent = session;
    }
    
    // –†–µ–Ω–¥–µ—Ä–∏–º –∑–∞–ø—Ä–æ—Å—ã
    function renderRequests(requests) {
      const container = document.getElementById('requests-list');
      
      if (requests.length === 0) {
        container.innerHTML = '<div class="empty">–ó–∞–ø—Ä–æ—Å—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–≥—Ä—ã.</div>';
        return;
      }
      
      container.innerHTML = requests.map((req, index) => {
        const isImportant = req.url && (
          req.url.includes('session') || 
          req.url.includes('game') || 
          req.url.includes('stake-engine')
        );
        
        return `
          <div class="request-item ${isImportant ? 'important' : ''}">
            <div class="request-header">
              <span class="request-method ${req.method}">${req.method}</span>
              <span class="request-url">${req.url}</span>
            </div>
            <div class="request-details">
              <details>
                <summary>üìã –î–µ—Ç–∞–ª–∏ –∑–∞–ø—Ä–æ—Å–∞</summary>
                <pre>${JSON.stringify({
                  method: req.method,
                  url: req.url,
                  headers: req.headers,
                  body: req.body,
                  response: req.response,
                  timestamp: req.timestamp
                }, null, 2)}</pre>
              </details>
            </div>
          </div>
        `;
      }).join('');
    }
    
    // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∑–∞–ø—Ä–æ—Å—ã
    function exportRequests() {
      if (typeof exportCapturedRequests !== 'function') {
        alert('‚ö†Ô∏è –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
        return;
      }
      exportCapturedRequests();
    }
    
    // –û—á–∏—â–∞–µ–º –∑–∞–ø—Ä–æ—Å—ã
    function clearRequests() {
      if (typeof clearCapturedRequests !== 'function') {
        alert('‚ö†Ô∏è –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω');
        return;
      }
      if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∑–∞—Ö–≤–∞—á–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã?')) {
        clearCapturedRequests();
        refreshRequests();
      }
    }
    
    // –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
    setInterval(refreshRequests, 2000);
    
    // –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
    refreshRequests();
  </script>
</body>
</html>

